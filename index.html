<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VTE ‚Ä¢ PE ‚Ä¢ Pulmonary HTN ‚Äì Drag & Drop Game</title>
<style>
  :root{
    --bg:#050816; --card:#101827; --ink:#e8eefc; --muted:#9ca3c7;
    --ok:#22c55e; --bad:#ef4444; --accent:#6366f1;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    background:radial-gradient(1200px 800px at 5% -10%, #1e293b, #020617 55%);
    color:var(--ink);
    min-height:100vh;
    display:flex;
    flex-direction:column;
    gap:20px;
  }
  header{padding:18px 20px 0}
  h1{
    margin:0 0 6px;
    font-size:clamp(20px,3.2vw,30px);
    font-weight:750;
    letter-spacing:.2px;
  }
  p.lead{margin:0; color:var(--muted); max-width:720px}
  .wrap{display:grid; gap:18px; padding:10px 20px 28px}
  @media (min-width:1000px){ .wrap{grid-template-columns:1fr 1fr;} }
  .panel{
    background:linear-gradient(180deg,#111827,#020617);
    border-radius:16px;
    border:1px solid #1f2937;
    padding:16px;
    box-shadow:0 18px 45px rgba(0,0,0,.55);
  }
  .panel h2{margin:0 0 8px; font-size:18px; color:#c7d2fe}
  .list,.grid{display:grid; gap:10px}
  .list{grid-auto-rows:minmax(48px,auto)}
  .pill{
    background:#020617;
    border-radius:12px;
    border:1px solid #293548;
    padding:10px 12px;
    font-weight:650;
    cursor:grab;
    user-select:none;
    display:flex;
    align-items:center;
    justify-content:space-between;
    transition:transform .08s ease,background .12s ease,border-color .12s ease;
  }
  .pill:hover{border-color:#4b5cff}
  .pill:active{transform:scale(.98); cursor:grabbing}
  .pill.lock{
    cursor:default;
    opacity:.55;
    border-color:#374151;
    background:#020617;
  }
  .desc{
    border-radius:12px;
    border:1.5px dashed #283548;
    padding:12px;
    min-height:60px;
    background:#020617;
    display:grid;
    align-items:center;
    transition:border-color .12s ease,background .12s ease;
  }
  .desc .slotTitle{
    font-size:13px;
    font-weight:700;
    color:#c7d2fe;
    margin-bottom:3px;
  }
  .desc .text{
    font-size:14px;
    line-height:1.3;
    color:#e5e7eb;
  }
  .desc .accept{
    font-size:12px;
    font-style:italic;
    color:#9ca3c7;
    margin-top:4px;
  }
  .desc.correct{
    border-color:var(--ok);
    background:rgba(34,197,94,.08);
  }
  .desc.wrong{
    border-color:var(--bad);
    background:rgba(239,68,68,.08);
  }
  .footer{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    align-items:center;
    justify-content:space-between;
    margin-top:8px;
  }
  .btn{
    border:none;
    border-radius:999px;
    padding:9px 14px;
    font-weight:700;
    cursor:pointer;
    background:linear-gradient(180deg,#6366f1,#4f46e5);
    color:white;
    box-shadow:0 8px 25px rgba(79,70,229,.55);
  }
  .btn.secondary{
    background:#111827;
    color:#e5e7eb;
    box-shadow:none;
    border:1px solid #374151;
  }
  .score{font-weight:700; color:#e5e7eb}
  .tiny{font-size:12px; color:#9ca3c7}
  .tag{
    display:inline-block;
    padding:.2em .6em;
    border-radius:999px;
    border:1px solid #374151;
    font-size:11px;
    color:#c7d2fe;
  }
  .bucket{display:flex; gap:6px; flex-wrap:wrap; max-width:100%}
</style>
</head>
<body>
<header>
  <h1>VTE ‚Ä¢ PE ‚Ä¢ Pulmonary Hypertension ‚Äì Drag & Drop Drugs</h1>
  <p class="lead">
    Drag each <b>drug name</b> (left) onto its matching <b>description</b> (right).
    Each description includes the drug‚Äôs <b>class</b> and the key <b>red-text warnings/BBW/contraindications</b> from the lecture.
  </p>
</header>

<div class="wrap">
  <section class="panel">
    <h2>Drugs</h2>
    <div id="drugList" class="list" aria-label="Draggable drug names"></div>
    <div class="footer">
      <div class="bucket" id="legend"></div>
      <div>
        <button id="shuffle" class="btn">Shuffle</button>
        <button id="reset" class="btn secondary">Reset</button>
      </div>
    </div>
    <p class="tiny">
      Source: ‚ÄúDrugs Used to Treat PE/Thromboembolism/VTE/PAH‚Äù ‚Äì Iszard.:contentReference[oaicite:1]{index=1}
    </p>
  </section>

  <section class="panel">
    <h2>Descriptions</h2>
    <div id="descGrid" class="grid"></div>
    <div class="footer">
      <div id="scoreArea" class="score">0 / 20 correct</div>
    </div>
  </section>
</div>

<script>
const ITEMS = [
  // --- Anticoagulants / Thrombolytic for PE/VTE ---
  {id:"heparin", label:"Heparin (UFH)", group:"Anticoagulant ‚Äì unfractionated heparin",
   desc:"Anticoagulant ‚Äì UFH used IV/SubQ for immediate effect in PE/DVT; also prophylaxis. Requires monitoring and bridging to longer-term therapy."},

  {id:"enoxaparin", label:"Enoxaparin", group:"Anticoagulant ‚Äì LMWH",
   desc:"Anticoagulant ‚Äì LMWH (enoxaparin) given SubQ; preferred for PE/VTE due to ease of use and predictable action."},

  {id:"dalteparin", label:"Dalteparin", group:"Anticoagulant ‚Äì LMWH",
   desc:"Anticoagulant ‚Äì LMWH (dalteparin) used SubQ for treatment and prophylaxis of VTE with more predictable dosing than UFH."},

  {id:"warfarin", label:"Warfarin", group:"Oral anticoagulant ‚Äì vitamin K antagonist",
   desc:"Oral anticoagulant ‚Äì inhibits vitamin K-dependent clotting factors; used for long-term anticoagulation after PE/VTE."},

  {id:"rivaroxaban", label:"Rivaroxaban", group:"DOAC ‚Äì factor Xa inhibitor",
   desc:"Direct oral anticoagulant ‚Äì factor Xa inhibitor for PE/VTE; newer agent that does not require regular monitoring and is convenient for long-term management."},

  {id:"apixaban", label:"Apixaban", group:"DOAC ‚Äì factor Xa inhibitor",
   desc:"Direct oral anticoagulant ‚Äì factor Xa inhibitor for treatment and prevention of thromboembolism without routine lab monitoring."},

  {id:"dabigatran", label:"Dabigatran", group:"DOAC ‚Äì direct thrombin inhibitor",
   desc:"Direct oral anticoagulant ‚Äì direct thrombin inhibitor used for VTE; convenient oral option without routine monitoring."},

  {id:"alteplase", label:"Alteplase", group:"Thrombolytic ‚Äì tPA",
   desc:"Thrombolytic (clot-buster) ‚Äì tPA that actively dissolves clots; used in severe or life-threatening PE, typically massive or hemodynamically unstable cases."},

  // --- Prostanoids / Prostacyclin analogs ---
  {id:"epoprostenol", label:"Epoprostenol", group:"Prostanoid ‚Äì prostacyclin analog",
   desc:"Prostanoid ‚Äì IV continuous infusion that promotes vasodilation, inhibits smooth-muscle growth and platelet aggregation. Red: severe heart failure is a contraindication; abrupt discontinuation can cause life-threatening rebound PAH; risk of hypotension, syncope and bleeding due to antiplatelet effect."},

  {id:"treprostinil", label:"Treprostinil", group:"Prostanoid ‚Äì prostacyclin analog",
   desc:"Prostanoid ‚Äì given IV, SC, inhaled or oral with longer half-life and room-temperature stability. Red: additive hypotension with antihypertensives; ‚Üë bleeding with anticoagulants; systemic AEs (flushing, headache, jaw pain, nausea, diarrhea) and injection-site reactions require monitoring."},

  {id:"iloprost", label:"Iloprost", group:"Prostanoid ‚Äì prostacyclin analog (inhaled)",
   desc:"Prostanoid ‚Äì inhaled selective pulmonary vasodilator (6‚Äì9 doses/day). Red: risk of hypotension/syncope and rebound PAH if abruptly stopped; cough and throat irritation as inhalation-site reactions."},

  {id:"selexipag", label:"Selexipag", group:"IP receptor agonist (prostanoid pathway)",
   desc:"Oral IP-receptor agonist targeting the prostacyclin pathway. Red: hypotension/syncope, GI AEs (nausea, diarrhea), and bleeding risk from antiplatelet effects ‚Üí need careful titration and education."},

  // --- Endothelin receptor antagonists ---
  {id:"bosentan", label:"Bosentan", group:"Endothelin receptor antagonist (ERA)",
   desc:"ERA for PAH to improve exercise capacity and delay clinical worsening. Red BBW: hepatotoxicity and embryo-fetal toxicity ‚Äì monitor liver enzymes monthly; contraindicated in pregnancy and with cyclosporine; may ‚Üì hormonal contraceptive effectiveness, cause anemia and ‚Üì sperm count."},

  {id:"ambrisentan", label:"Ambrisentan", group:"Endothelin receptor antagonist (ERA)",
   desc:"Selective ERA for PAH. Red: risks of hepatotoxicity and embryo-fetal toxicity; contraindicated in pregnancy; causes fluid retention/peripheral edema and ‚Üì sperm count; requires monthly pregnancy testing and caution with cyclosporine or strong CYP3A modulators."},

  {id:"macitentan", label:"Macitentan", group:"Endothelin receptor antagonist (ERA)",
   desc:"ERA for PAH that blocks endothelin receptors to reduce vascular resistance. Red: avoid in pregnancy and severe liver impairment; monitor liver enzymes and hemoglobin for hepatotoxicity and anemia; CYP3A4 inducers/inhibitors alter drug levels."},

  // --- PDE-5 inhibitors ---
  {id:"sildenafil", label:"Sildenafil", group:"PDE-5 inhibitor",
   desc:"PDE-5 inhibitor for PAH to improve exercise ability and delay clinical worsening. Red: contraindicated with organic nitrates (severe hypotension) or hypersensitivity; not recommended in pediatrics; cautions in hypotension, pulmonary veno-occlusive disease, and with antihypertensives; may cause hearing/visual impairment and serious vaso-occlusive crises in sickle-cell pts; interacts with Œ±-blockers, amlodipine and strong CYP3A inhibitors; avoid with other PDE-5 inhibitors."},

  {id:"tadalafil", label:"Tadalafil", group:"PDE-5 inhibitor (longer t¬Ω)",
   desc:"PDE-5 inhibitor for PAH with longer half-life than sildenafil. Shares class issues: contraindicated with nitrates/NO donors; additive BP-lowering with antihypertensives or Œ±-blockers; avoid combination with other PDE-5 inhibitors."},

  // --- Guanylate cyclase stimulator ---
  {id:"riociguat", label:"Riociguat", group:"Soluble guanylate cyclase stimulator",
   desc:"sGC stimulator used for PAH and CTEPH ‚Äì ‚Üë cGMP and vasodilation, improves exercise capacity and delays worsening. Red: pregnancy Category X with embryo-fetal toxicity (REMS, strict contraception); contraindicated with nitrates, NO donors, and PDE inhibitors, and in pulmonary veno-occlusive disease; warnings for symptomatic hypotension, serious bleeding (hemoptysis, GI hemorrhage), and worsening PVOD; many interactions (CYP/P-gp inhibitors, antacids, smoking) and avoid in severe renal/hepatic impairment."},

  // --- Calcium channel blockers for PAH subset ---
  {id:"nifedipine", label:"Nifedipine", group:"Calcium channel blocker",
   desc:"CCB used in vasoreactive PAH to vasodilate pulmonary arteries and ‚Üì right-sided afterload. Red limitations: not effective in non-vasoreactive PAH and carries risk of systemic hypotension ‚Üí requires careful patient selection and monitoring."},

  {id:"diltiazem", label:"Diltiazem", group:"Calcium channel blocker",
   desc:"CCB used in selected PAH (esp. idiopathic PAH with elevated heart rate) by blocking L-type Ca¬≤‚Å∫ channels in vascular and cardiac tissue; causes pulmonary vasodilation and HR reduction. Red: risk of systemic hypotension and bradycardia ‚Üí use only in vasoreactive patients with close monitoring."}
];

const $  = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));
const shuffle = arr => {
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
};

let picked = null;

function buildGame(){
  const drugList = $("#drugList");
  const descGrid = $("#descGrid");
  drugList.innerHTML = "";
  descGrid.innerHTML = "";

  const drugs   = shuffle([...ITEMS]);
  const targets = shuffle([...ITEMS]);

  // legend of classes
  const groups = [...new Set(ITEMS.map(i => i.group))];
  $("#legend").innerHTML = groups.map(g => `<span class="tag">${g}</span>`).join("");

  // left side ‚Äì pills
  drugs.forEach(d => {
    const el = document.createElement("div");
    el.className = "pill";
    el.textContent = d.label;
    el.dataset.id = d.id;
    el.setAttribute("draggable","true");
    el.title = d.group;
    el.addEventListener("dragstart", e => {
      e.dataTransfer.setData("text/plain", d.id);
    });
    el.addEventListener("click", () => {
      if(!el.classList.contains("lock")) picked = d.id;
    });
    drugList.appendChild(el);
  });

  // right side ‚Äì description boxes
  targets.forEach(t => {
    const box = document.createElement("div");
    box.className = "desc";
    box.dataset.id = t.id;
    box.innerHTML = `
      <div class="slotTitle">Description</div>
      <div class="text">${t.desc}</div>
      <div class="accept">Drop the matching drug here</div>
    `;
    box.addEventListener("dragover", e => e.preventDefault());
    box.addEventListener("drop", e => {
      e.preventDefault();
      handleDrop(e.dataTransfer.getData("text/plain"), box);
    });
    box.addEventListener("click", () => {
      if(picked) handleDrop(picked, box);
    });
    descGrid.appendChild(box);
  });

  updateScore();
}

function handleDrop(id, box){
  if(!id || box.classList.contains("correct")) return;
  const pill = document.querySelector(`.pill[data-id="${id}"]`);
  if(!pill || pill.classList.contains("lock")) return;

  if(id === box.dataset.id){
    box.classList.remove("wrong");
    box.classList.add("correct");
    box.querySelector(".accept").innerHTML = `‚úÖ Matched: <b>${pill.textContent}</b>`;
    pill.classList.add("lock");
    pill.setAttribute("draggable","false");
  } else {
    box.classList.add("wrong");
    box.querySelector(".accept").textContent = "‚ùå Not a match, try again.";
    setTimeout(() => {
      box.classList.remove("wrong");
      box.querySelector(".accept").textContent = "Drop the matching drug here";
    }, 750);
  }
  picked = null;
  updateScore();
}

function updateScore(){
  const correct = $$(".desc.correct").length;
  $("#scoreArea").textContent = `${correct} / ${ITEMS.length} correct` +
    (correct === ITEMS.length ? " ‚Äì All matched! üéâ" : "");
}

$("#shuffle").addEventListener("click", buildGame);
$("#reset").addEventListener("click", () => {
  $$(".pill").forEach(p => {
    p.classList.remove("lock");
    p.setAttribute("draggable","true");
    p.style.opacity = "";
    p.style.cursor  = "grab";
  });
  $$(".desc").forEach(d => {
    d.classList.remove("correct","wrong");
    const msg = d.querySelector(".accept");
    if(msg) msg.textContent = "Drop the matching drug here";
  });
  updateScore();
});

buildGame();
</script>
</body>
</html>
